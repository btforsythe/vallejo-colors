<!DOCTYPE html>
<html>
<head>
	<title>Proximity Calculator</title>
</head>
<body>
	<label for="rgb">RGB:</label>
	<input type="text" id="rgb" />
	<label for="setSelector">Set:</label>
	<select id="setSelector"></select>
	<button id="find">Find!</button>

	<script src="./js/color.js"></script>
	<script src="./js/product.js"></script>
	<script src="./js/color-matcher.js"></script>
	<script src="./setsData.js"></script>

	<script>
		window.onload = function() {
			populateSetSelector()
			wireFindButton()
		}

		let populateSetSelector = function() {
			let selector = setSelector()
			sets.map(createSetOption).forEach(o => selector.appendChild(o))
		}

		let setSelector = () => document.getElementById('setSelector')

		let createSetOption = function(set) {
			let option = document.createElement('option')
			option.textContent = set.name
			return option
		}

		let wireFindButton = function() {
			let find = document.getElementById('find')
			find.onclick = findSetMatches
		}

		let findSetMatches = function() {

			let setColors = selectedSet().colors
			let matches = new ColorMatcher(setColors).match(colorToMatch())

			console.log(matches)
		}

		let selectedSet = () => findSetNamed(selectedSetName())
		let selectedSetName = () => setSelector().selectedOptions[0].value

		let colorToMatch = () => Color.fromRgb(specifiedRgb())
		let specifiedRgb = () => document.getElementById('rgb').value

		let findSetNamed = function(name) {
			return sets.find(s => s.name === name)
		}
	</script>
</body>
</html>